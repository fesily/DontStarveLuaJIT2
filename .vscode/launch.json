{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Attach game by cpp",
            "type": "cppvsdbg",
            "request": "attach",
            "visualizerFile": "${workspaceFolder}/LuaJit.Natvis"
        },
        {
            "name": "(linux) Attach game",
            "type": "cppdbg",
            "request": "attach",
            "program": "${config:steam.game.root}/bin64/dontstarve_steam_x64_1"
        },
        {
            "name": "(linux) Attach docker server",
            "type": "cppdbg",
            "request": "attach",
            "program": "${config:steam.game.root}/bin64/dontstarve_dedicated_server_nullrenderer_x64",
            "processId": "${command:pickProcess}",
        },
        {
            "name": "(Windows) 启动",
            "type": "cppvsdbg",
            "request": "launch",
            "program": "${config:steam.game.root}/bin64/dontstarve_steam_x64.exe",
            "args": ["-enable_lua_debugger"],
            "cwd": "${config:steam.game.root}/bin64",
            "environment": [
                //{"name": "DontStarveInjectorDisable", "value": "1"}
            ],
            "visualizerFile": "${workspaceFolder}/LuaJit.Natvis"
        },
        {
            "name": "(Windows) 启动(lua)",
            "type": "cppvsdbg",
            "request": "launch",
            "program": "${config:steam.game.root}/bin64/dontstarve_steam_x64.exe",
            "args": [
                "-e",
                //"print 'hello'",
                "dofile[[c:/Users/fesil/.vscode/extensions/actboy168.lua-debug-2.2.2-win32-x64/script/launch.lua]] DBG[[42128]]",
                "",
                "-enable_lua_debugger"
            ],
            "cwd": "${config:steam.game.root}/bin64",
            "environment": [
                //{"name": "DontStarveInjectorDisable", "value": "1"}
            ],
            "visualizerFile": "${workspaceFolder}/LuaJit.Natvis"
        },
        {
            "name": "(Windows) 启动服务器",
            "type": "cppvsdbg",
            "request": "launch",
            "program": "${config:steam.game.root}/bin64/dontstarve_dedicated_server_nullrenderer_x64.exe",
            // -persistent_storage_root APP:Klei/ -conf_dir DoNotStarveTogether -cluster Cluster_1 -ownernetid 76561198151751414 -ownerdir 191485686 -clouddir 191485686 -backup_log_count 25 -backup_log_period 0 -ugc_directory "C:\Program Files (x86)\Steam\steamapps\workshop" -shard Master -secondary_log_prefix master -sigprefix DST_Master
            "args": [
                //"-tick","60",
                "-persistent_storage_root",
                "APP:Klei/",
                "-conf_dir",
                "DoNotStarveTogether",
                "-cluster",
                "Cluster_1",
                "-ownernetid",
                "76561198151751414",
                "-ownerdir",
                "191485686",
                "-clouddir",
                "191485686",
                "-backup_log_count",
                "25",
                "-backup_log_period",
                "0",
                "-ugc_directory",
                "${config:steam.modroot}",
                "-shard",
                "Master",
                "-secondary_log_prefix",
                "master",
                "-sigprefix",
                "DST_Master",
                //"-enable_lua_debugger"
            ],
            "cwd": "${config:steam.game.root}/bin64",
            "visualizerFile": "${workspaceFolder}/LuaJit.Natvis",
            //"environment": [{"name": "DontStarveInjectorDisable", "value": "1"}],
        },
        {
            "name": "(Windows) 启动服务器(lua)",
            "type": "lua",
            "request": "launch",
            "program": "${config:steam.game.root}/bin64/dontstarve_dedicated_server_nullrenderer_x64.exe",
            "arg": [
                //"-tick","60",
                "-persistent_storage_root",
                "APP:Klei/",
                "-conf_dir",
                "DoNotStarveTogether",
                "-cluster",
                "Cluster_1",
                "-ownernetid",
                "76561198151751414",
                "-ownerdir",
                "191485686",
                "-clouddir",
                "191485686",
                "-backup_log_count",
                "25",
                "-backup_log_period",
                "0",
                "-ugc_directory",
                "${config:steam.modroot}",
                "-shard",
                "Master",
                "-secondary_log_prefix",
                "master",
                "-sigprefix",
                "DST_Master",
                "-enable_lua_debugger"
            ],
            "cwd": "${config:steam.game.root}/bin64",
        },
        {
            "name": "(Linux) debug game",
            "type": "cppdbg",
            "request": "launch",
            "program": "${config:steam.game.root}/bin64/dontstarve_steam_x64_1",
            "args": [],
            "stopAtConnect": true,
            "cwd": "${config:steam.game.root}/bin64",    
            "environment": [
                {
                    "name": "LD_PRELOAD",
                    "value": "./lib64/libInjector.so"
                }
                //,{"name": "LD_DEBUG", "value": "libs"}
            ],
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "(Linux) debug docker server",
            "type": "cppdbg",
            "request": "launch",
            "program": "${config:steam.game.root}/bin64/dontstarve_dedicated_server_nullrenderer_x64",
            "args": [
                "-cluster",
                "DSTWhalesCluster"
            ],
            "stopAtConnect": true,
            "cwd": "${config:steam.game.root}/bin64",
            "environment": [
                {
                    "name": "LD_PRELOAD",
                    "value": "./lib64/libInjector.so"
                },
                {
                    "name": "LD_LIBRARY_PATH",
                    "value": "./lib64"
                }
            ],
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                }
            ],
            "preLaunchTask": "docker_server_init"
        },
        {
            "name": "(Linux) debug signature_creater",
            "type": "cppdbg",
            "request": "launch",
            "program": "${config:steam.game.root}/bin64/dontstarve_steam_x64_1",
            "args": [],
            "stopAtConnect": true,
            "cwd": "${config:steam.game.root}/bin64",
            "environment": [
                {
                    "name": "LD_PRELOAD",
                    "value": "${workspaceFolder}/builds/ninja-multi-vcpkg/tools/Creater/Debug/libsignature_updater.so"
                }
                //,{"name": "LD_DEBUG", "value": "libs"}
            ],
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "(Linux) debug file_signature",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/Mod/bin64/linux/lib64/lua51",
            "args": [],
            "stopAtConnect": true,
            "cwd": "${workspaceFolder}/Mod/bin64/linux",
            "environment": [
                {
                    "name": "LD_PRELOAD",
                    "value": "${workspaceFolder}/builds/ninja-multi-vcpkg/tools/Creater/Debug/libsignature_updater.so"
                }
            ],
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "Launch luajit",
            "type": "cppvsdbg",
            "request": "launch",
            "program": "${workspaceFolder}/builds/ninja-multi-vcpkg/luajit/Debug/luajit",
            "args": [
                //"-bl",
                "${workspaceFolder}/test.lua",
            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}/builds/ninja-multi-vcpkg",
            "environment": [],
            "visualizerFile": "${workspaceFolder}/LuaJit.Natvis"
        },
        {
            "name": "Launch lua51",
            "type": "cppvsdbg",
            "request": "launch",
            "program": "${workspaceFolder}/builds/ninja-multi-vcpkg/src/lua51original/Debug/lua.exe",
            "args": [
                "${workspaceFolder}/test.lua",
            ],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}/builds/ninja-multi-vcpkg",
            "environment": [],
            "visualizerFile": "${workspaceFolder}/Lua51.Natvis"
        },
        {
            "name": "Launch lua simulator",
            "type": "lua",
            "request": "launch",
            "program": "${workspaceFolder}/tests/sect/simulator.lua",
            "cwd": "${workspaceFolder}",
            "console": "integratedTerminal",
            "luaVersion": "luajit",
            "arg": [
                "tests/2847908822/modmain12345.lua",
                "../mods/workshop-2847908822/modmain.lua"
            ],
            "luaexe": "${workspaceFolder}/builds/ninja-multi-vcpkg/luajit/Debug/luajit",
            //"luaexe": "${workspaceFolder}/builds/ninja-multi-vcpkg/src/lua51original/RelWithDebInfo/lua",
            "stopOnEntry": true,
            "env": {},
            "sourceMaps": [
                [
                    "./*",
                    "${workspaceFolder}/*"
                ],
                [
                    "../mods/workshop-2847908822/modmain.lua",
                    "${workspaceFolder}/tests/2847908822/modmain12345.lua"
                ]
            ]
        },
        {
            "name": "(Linux) docker server(TEST_INJECTOR)",
            "type": "cppdbg",
            "request": "launch",
            "program": "/root/server_dst/bin64/dontstarve_dedicated_server_nullrenderer_x64",
            "args": [
                "-e",
                "dofile'/root/.vscode-server/extensions/actboy168.lua-debug-2.0.12-linux-x64/script/launch.lua' DBG'52444/ansi'",
                "${workspaceFolder}/test.lua",
                "1.lua","2.lua"
            ],
            "stopAtConnect": true,
            "cwd": "/root/server_dst/bin64",
            "environment": [
                {
                    "name": "LD_PRELOAD",
                    "value": "./lib64/libInjector.so"
                },
                {
                    "name": "LD_LIBRARY_PATH",
                    "value": "./lib64"
                },
                {
                    "name": "LUA_DEBUG_PLATFORM",
                    "value": "linux-x64"
                },
                {
                    "name": "GAME_INJECTOR_NO_DEFAULT_BEFORE",
                    "value": "1"
                }
            ],
            "MIMode": "gdb",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                }
            ],
            "preLaunchTask": "docker_server_init"
        },
        {
            "name": "Debug GAME Lua (INJECTOR)",
            "type": "lua",
            "request": "launch",
            "program": "${workspaceFolder}/test.lua",
            "luaexe": "${config:steam.game.root}/bin64/dontstarve_dedicated_server_nullrenderer_x64",
            "cwd": "${config:steam.game.root}/bin64",
            "arg": [
                "tests/2847908822/modmain12345.lua",
                "../mods/workshop-2847908822/modmain.lua"
            ],
            "stopOnEntry": true,
            "env": {
                "PATH": "${workspaceFolder}",
                //"LUAJIT_WAIT_DEBUGGER_ENABLE": "1",
                "LD_PRELOAD": "${config:steam.game.root}/bin64/lib64/libInjector.so",
                "LD_LIBRARY_PATH": "${config:steam.game.root}/bin64/lib64",
                "LUA_DEBUG_PLATFORM": "linux-x64",
                "GAME_INJECTOR_NO_DEFAULT_BEFORE": "1"
            },
            "path": null,
            "cpath": null,
            "luaVersion": "luajit"
        },
        {
            "name": "Debug Lua Vm",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/builds/ninja-multi-vcpkg/luajit/Debug/luajit",
            //"program": "${workspaceFolder}/builds/ninja-multi-vcpkg/src/lua51original/RelWithDebInfo/lua",
            "args": [
                "${workspaceFolder}/tests/sect/simulator.lua",
                "tests/2847908822/modmain12345.lua",
                "../mods/workshop-2847908822/modmain.lua"
            ],
            "stopAtEntry": true,
            "cwd": "${workspaceFolder}",
            "environment": [],
        },
        {
            "arg": [],
            "name": "launch lua script",
            "program": "${file}",
            "request": "launch",
            "stopOnEntry": true,
            "type": "lua",
            "luaVersion": "lua51"
        },
        {
            "name": "Python: Current File",
            "type": "debugpy",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            "justMyCode": false,
            "args": []
        },
    ]
}